# ============================================================================
# SSO System - Environment Variables (Example)
# ============================================================================
# 이 파일을 복사하여 .env 파일 생성:
#   cp .env.example .env
#
# 그 후 실제 값으로 변경하세요.
# ⚠️  .env 파일은 절대 Git에 커밋하지 마세요! (.gitignore에 포함됨)
# ============================================================================

# ----------------------------------------------------------------------------
# Supabase Configuration (로컬 개발)
# ----------------------------------------------------------------------------
# `npx supabase start` 실행 후 출력되는 값을 여기에 입력

# API URL (로컬: http://localhost:54321)
SUPABASE_URL=http://localhost:54321

# Anon Key (공개 가능한 키, 프론트엔드에서 사용)
SUPABASE_ANON_KEY=your_anon_key_here

# Service Role Key (비밀 키, 백엔드에서만 사용)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# JWT Secret (JWT 검증에 사용, 매우 중요!)
JWT_SECRET=your_jwt_secret_here

# Database URL (로컬: postgresql://postgres:postgres@localhost:54322/postgres)
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# ----------------------------------------------------------------------------
# SSO Server Configuration
# ----------------------------------------------------------------------------

# 환경 (development | production)
NODE_ENV=development

# SSO 서버 URL
SSO_URL=http://localhost:3000

# SSO 서버 포트
PORT=3000

# ----------------------------------------------------------------------------
# Google OAuth (선택사항)
# ----------------------------------------------------------------------------
# Google Cloud Console에서 OAuth 2.0 클라이언트 ID 생성
# https://console.cloud.google.com/apis/credentials
#
# Authorized redirect URIs:
#   - http://localhost:3000/auth/callback (개발)
#   - https://sso.yourdomain.com/auth/callback (프로덕션)

GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# ----------------------------------------------------------------------------
# Session Configuration
# ----------------------------------------------------------------------------

# 세션 비밀 키 (crypto.randomBytes(32).toString('hex')로 생성)
SESSION_SECRET=your-random-session-secret-key-here

# 세션 만료 시간 (밀리초, 기본 1시간)
SESSION_MAX_AGE=3600000

# 쿠키 도메인 (프로덕션에서 shared_cookie 사용 시)
# 개발: localhost (비워두기)
# 프로덕션: .yourdomain.com
COOKIE_DOMAIN=

# ----------------------------------------------------------------------------
# CORS & Security
# ----------------------------------------------------------------------------
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# ----------------------------------------------------------------------------
# Test Credentials (Development Only!)
# ----------------------------------------------------------------------------
# ⚠️  프로덕션에서는 절대 사용하지 마세요!
#
# Admin User (seed.sql에서 자동 생성):
#   Email: admin@sso.local
#   Password: admin123!@#
#
# Test Apps (seed.sql에서 자동 생성):
#   - VTC_Logger: api_key는 DB 조회 필요
#   - contents-factory: api_key는 DB 조회 필요
#   - SSO Admin Dashboard: api_key는 DB 조회 필요
#
# API Keys 조회:
#   docker exec supabase_db_sso-system psql -U postgres \
#     -c "SELECT name, api_key FROM public.apps;"
#
# ============================================================================
# 다음 단계
# ============================================================================
# 1. 이 파일을 .env로 복사:
#    cp .env.example .env
#
# 2. Supabase 시작:
#    npx supabase start
#
# 3. 출력된 키들을 .env에 복사:
#    - API URL
#    - Anon key
#    - Service Role key
#
# 4. SSO 서버 시작:
#    cd server && npm install
#    npm start
#
# 5. 테스트:
#    curl http://localhost:3000/health
#    ./test-sso-flow.sh
#
# 6. Google OAuth 설정 (선택):
#    - Google Console에서 OAuth 2.0 클라이언트 ID 생성
#    - .env에 GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET 추가
#
# 7. SESSION_SECRET 생성 (선택):
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# ============================================================================
