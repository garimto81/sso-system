## ğŸ“Œ ìš”ì•½

ì§„ì§œ SSO(Single Sign-On) ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ ì¤‘ì•™ ì¸ì¦ ì„œë²„ì—ì„œ ë¡œê·¸ì¸í•˜ë©´, ëª¨ë“  ì—°ë™ ì•±(VTC_Logger, contents-factory ë“±)ì—ì„œ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ ìƒíƒœê°€ ë©ë‹ˆë‹¤.

### í•µì‹¬ ì°¨ë³„ì 
- âœ… Google OAuth ì„¤ì •ì€ SSO ì„œë²„ í•˜ë‚˜ë§Œ (ì•±ë§ˆë‹¤ ì„¤ì • ë¶ˆí•„ìš”)
- âœ… ë¦¬ë””ë ‰ì…˜ URL ì¶”ê°€ ì‘ì—… ì—†ìŒ (ì•± ë“±ë¡ë§Œ DBì— ì¶”ê°€)
- âœ… 3ê°€ì§€ ì‚¬ìš©ì ê²½í—˜ ëª¨ë‘ ì§€ì› (íˆ¬ëª…í•œ ì¸ì¦ / ìë™ ë¡œê·¸ì¸ / ëª…ì‹œì  SSO)
- âœ… ë„ë©”ì¸ ì œì•½ ì—†ìŒ (ê°™ì€ ë„ë©”ì¸, ë‹¤ë¥¸ ë„ë©”ì¸ ëª¨ë‘ ì§€ì›)

---

## ğŸ¯ ëª©í‘œ

1. âœ… SSO ì¤‘ì•™ ì¸ì¦ ì„œë²„ êµ¬ì¶• (Supabase ê¸°ë°˜)
2. âœ… Token Exchange ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„ (ë„ë©”ì¸ ì œì•½ ì—†ì´ JWT ê³µìœ )
3. âœ… 3ê°€ì§€ ì‚¬ìš©ì ê²½í—˜(UX) ì§€ì›
4. âœ… í•˜ì´ë¸Œë¦¬ë“œ ë„ë©”ì¸ ì „ëµ (ë¡œì»¬/í”„ë¡œë•ì…˜ ìë™ ì „í™˜)
5. âœ… OAuthëŠ” SSO ì„œë²„ì—ë§Œ ì„¤ì • (ì•± ì¶”ê°€ ì‹œ Google Console ë¶ˆí•„ìš”)

---

## ğŸ“‹ ì£¼ìš” ì‘ì—…

### 1. Supabase í™˜ê²½ ì„¤ì •
- [ ] Docker Desktop ì‹¤í–‰ í™•ì¸
- [ ] `supabase start` ì‹¤í–‰
- [ ] ë¡œì»¬ Supabase ì„œë²„ ì ‘ì† í™•ì¸ (http://localhost:54323)
- [ ] API URL, Anon Key, Service Role Key í™•ë³´
- [ ] `.env` íŒŒì¼ ìƒì„± ë° í‚¤ ì…ë ¥

### 2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- [ ] `profiles` í…Œì´ë¸” (ì‚¬ìš©ì í”„ë¡œí•„)
- [ ] `apps` í…Œì´ë¸” (SSO ë“±ë¡ ì•±)
- [ ] `auth_codes` í…Œì´ë¸” (Token Exchangeìš©)
- [ ] RLS ì •ì±… ì ìš©
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì‘ì„± ë° ì‹¤í–‰

### 3. SSO API Endpoints
- [ ] `GET /api/v1/authorize` (Authorization Endpoint)
- [ ] `POST /api/v1/token/exchange` (Token Exchange Endpoint)

### 4. ì¸ì¦ ë°©ì‹
- [ ] Email/Password ì¸ì¦ (ê¸°ë³¸)
- [ ] Google OAuth ì„¤ì • (SSO ì„œë²„ì—ë§Œ)

### 5. í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
- [ ] Email/Password íšŒì›ê°€ì…/ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- [ ] Authorization Flow í…ŒìŠ¤íŠ¸
- [ ] Token Exchange í…ŒìŠ¤íŠ¸
- [ ] RLS ì •ì±… ë™ì‘ í™•ì¸

### 6. ë¬¸ì„œí™”
- [ ] API ë¬¸ì„œ ì‘ì„±
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¬¸ì„œ
- [ ] í™˜ê²½ë³€ìˆ˜ ê°€ì´ë“œ (.env.example)
- [ ] README ì—…ë°ì´íŠ¸

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SSO Central Server                          â”‚
â”‚          (localhost:3000)                             â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Login UI       â”‚     â”‚  SSO API             â”‚  â”‚
â”‚  â”‚  /login         â”‚     â”‚  /api/v1/authorize   â”‚  â”‚
â”‚  â”‚  /auth/callback â”‚     â”‚  /api/v1/token/ex... â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â†“                       â†“                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        Supabase (Auth + DB)                  â”‚  â”‚
â”‚  â”‚  - auth.users (ì‚¬ìš©ì)                        â”‚  â”‚
â”‚  â”‚  - profiles (ì—­í• , í”„ë¡œí•„)                    â”‚  â”‚
â”‚  â”‚  - apps (ë“±ë¡ ì•±)                             â”‚  â”‚
â”‚  â”‚  - auth_codes (ì¼íšŒìš© ì½”ë“œ)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ JWT / Cookie
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â†“            â†“            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VTC_Logger  â”‚ â”‚ contents â”‚ â”‚   AppN    â”‚
â”‚ (SDK í†µí•©)  â”‚ â”‚ -factory â”‚ â”‚ (SDK í†µí•©)â”‚
â”‚localhost:   â”‚ â”‚localhost:â”‚ â”‚ ...       â”‚
â”‚3001         â”‚ â”‚3002      â”‚ â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… ì™„ë£Œ ì¡°ê±´

1. âœ… `supabase start` ëª…ë ¹ì–´ ì‹¤í–‰ ì„±ê³µ
2. âœ… Supabase Studio ì ‘ì† ê°€ëŠ¥ (http://localhost:54323)
3. âœ… `profiles`, `apps`, `auth_codes` í…Œì´ë¸” ìƒì„± í™•ì¸
4. âœ… RLS ì •ì±… í™œì„±í™” í™•ì¸
5. âœ… Email íšŒì›ê°€ì…/ë¡œê·¸ì¸ ì„±ê³µ
6. âœ… Authorization Flow ë™ì‘ í™•ì¸
7. âœ… Token Exchange ë™ì‘ í™•ì¸
8. âœ… í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼

---

## ğŸ“Š ì˜ˆìƒ ì¼ì •

**ì˜ˆìƒ ê³µìˆ˜**: 2-3ì¼ (ì•½ 6.5ì‹œê°„ ì‹¤ì‘ì—…)

| Phase | ì‘ì—… | ì˜ˆìƒ ì‹œê°„ |
|-------|------|----------|
| Setup | Supabase ë¡œì»¬ ì‹œì‘ | 30ë¶„ |
| Schema | ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì„± | 2ì‹œê°„ |
| API | SSO Endpoints êµ¬í˜„ | 4ì‹œê°„ |
| Testing | í†µí•© í…ŒìŠ¤íŠ¸ | 1ì‹œê°„ |
| Docs | ë¬¸ì„œí™” | 1ì‹œê°„ |

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- PRD ì „ì²´: [tasks/prds/0001-prd-supabase-init.md](tasks/prds/0001-prd-supabase-init.md)
- Task List: [tasks/0001-tasks-supabase-init.md](tasks/0001-tasks-supabase-init.md)
- [Supabase Local Development](https://supabase.com/docs/guides/local-development)
- [Supabase Auth](https://supabase.com/docs/guides/auth)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)


